<!doctype html>
<html lang="de">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="appName">KPI Projects</title>
  <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="/assets/css/app.css" />
  <link rel="stylesheet" href="/assets/css/genTables.css" />
    <link rel="stylesheet" href="/assets/css/chart.css" />
  <link rel="stylesheet" href="/assets/css/moneyTone.css" />
  <link rel="stylesheet" href="/assets/css/legend-network.css" />
</head>

<body>
  <!-- App Mount: zentrales Layout (links Analyse, rechts Insights) -->
  <main id="app" class="container-fluid py-3">

    <!-- ROW 1: Header – App-Titel / Caption -->
    <div class="row g-3">
      <header id="pageHeader" class="col-12" aria-label="Kopfbereich">
        <p id="appCaption" class="title mb-0">ich bin oben</p>
      </header>
    </div>

    <!-- ROW 2: Main – links Analyse (Filter/Chart/Tabs), rechts Insights (Trends/Notizen) -->
    <div class="row g-3 align-items-start">

      <!-- LEFT: Analyse – Filter, Zeitraum, Chart, Inspector, Info+Tabs -->
      <section class="col-12 col-lg-8" aria-label="Auswertung">

        <!-- Filterleiste: Quelle / Typ / Kategorie / Modus -->
        <section class="mb-2" aria-label="Filter">
          <div class="row g-2">

            <div class="col-12 col-md-3">
              <label class="srOnly" for="srcBtn">Quelle</label>
              <div class="dropdown w-100">
                <button id="srcBtn" type="button"
                  class="btn btn-outline-secondary dropdown-toggle w-100 text-start"
                  data-bs-toggle="dropdown" aria-expanded="false">
                  Quellen: alle
                </button>
                <div class="dropdown-menu p-2 w-100" aria-labelledby="srcBtn">
                  <div class="d-flex gap-2 mb-2">
                    <button id="srcAllBtn" type="button" class="btn btn-sm btn-outline-secondary">Alle</button>
                  </div>
                  <div id="srcList" class="d-grid gap-1" role="listbox" aria-label="Quellen"></div>
                </div>
              </div>
            </div>

            <div class="col-12 col-md-3">
              <label class="srOnly" for="typeBtn">Typ</label>
              <div class="dropdown w-100">
                <button id="typeBtn" type="button"
                  class="btn btn-outline-secondary dropdown-toggle w-100 text-start"
                  data-bs-toggle="dropdown" aria-expanded="false">
                  Typen: alle
                </button>
                <div class="dropdown-menu p-2 w-100" aria-labelledby="typeBtn">
                  <div class="d-flex gap-2 mb-2">
                    <button id="typeAllBtn" type="button" class="btn btn-sm btn-outline-secondary">Alle</button>
                    <button id="typeResetBtn" type="button" class="btn btn-sm btn-outline-secondary">Reset</button>
                  </div>
                  <div id="typeList" class="d-grid gap-1" role="listbox" aria-label="Typen"></div>
                </div>
              </div>
            </div>

            <div class="col-12 col-md-3">
              <label class="srOnly" for="catBtn">Kategorie</label>
              <div class="dropdown w-100">
                <button id="catBtn" type="button"
                  class="btn btn-outline-secondary dropdown-toggle w-100 text-start"
                  data-bs-toggle="dropdown" aria-expanded="false">
                  Kategorien: alle
                </button>
                <div class="dropdown-menu p-2 w-100" aria-labelledby="catBtn">
                  <div class="d-flex gap-2 mb-2">
                    <button id="catAllBtn" type="button" class="btn btn-sm btn-outline-secondary">Alle</button>
                    <button id="catResetBtn" type="button" class="btn btn-sm btn-outline-secondary">Reset</button>
                  </div>
                  <div id="catList" class="d-grid gap-1" role="listbox" aria-label="Kategorien"></div>
                </div>
              </div>
            </div>

            <div class="col-12 col-md-3">
              <label class="srOnly" for="modeSelect">Modus</label>
              <select id="modeSelect" class="form-select">
                <option value="kosten">Kosten (€)</option>
                <option value="menge">Menge</option>
              </select>
            </div>

          </div>
        </section>

        <section id="yearRange" class="yearRange mb-2" aria-label="Zeitraum">
          <div class="row g-2">
            <div class="col-6">
              <input id="yearFrom" class="yearRange__slider form-range" type="range" min="0" max="0" value="0" step="1" />
            </div>
            <div class="col-6">
              <input id="yearTo" class="yearRange__slider form-range" type="range" min="0" max="0" value="0" step="1" />
            </div>
          </div>
          <div id="subtitle" class="yearRange__summary mb-2" aria-live="polite"></div>
        </section>

        <section id="chartWrap" class="chartWrap mb-3" aria-label="Diagramm">
          <svg id="chartSvg" role="img" aria-label="Diagramm"></svg>
        </section>

        <section class="mt-3" aria-label="Info und Tabs">
          <section id="panel" class="panel">
            <ul class="nav nav-tabs" id="rightTabs" role="tablist" aria-label="Tabs">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="categoryTab" data-bs-toggle="tab" data-bs-target="#categoryPane" type="button" role="tab" aria-controls="categoryPane" aria-selected="true">Kategorie</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="ctxTab" data-bs-toggle="tab" data-bs-target="#ctxPane" type="button" role="tab" aria-controls="ctxPane" aria-selected="false">CTX - Kontext</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="sourcesTab" data-bs-toggle="tab" data-bs-target="#sourcesPane" type="button" role="tab" aria-controls="sourcesPane" aria-selected="false">Quellen</button>
              </li>
            </ul>

            <div class="tab-content pt-3" id="rightTabContent">
              <div class="tab-pane fade show active" id="categoryPane" role="tabpanel" aria-labelledby="categoryTab" tabindex="0">
                <header class="mb-2" aria-label="Kategorie Kopf">
                  <h2 class="h6 mb-1">Kategorie – Details</h2>
                </header>
                <section aria-label="Kategorie Details Tabelle"><div id="categoryDetailsTable" class="derived-table"></div></section>
                   <div id="categoryInspector" class="tip tip--fixed" aria-live="polite"></div>
              </div>

              <div class="tab-pane fade" id="ctxPane" role="tabpanel" aria-labelledby="ctxTab" tabindex="0">
                <header class="mb-2" aria-label="CTX Kopf">
                  <h2 class="h6 mb-1">CTX – derived</h2>
                </header>
                <section aria-label="CTX Tabelle"><div id="derivedTable" class="derived-table"></div></section>
              </div>

              <div class="tab-pane fade" id="sourcesPane" role="tabpanel" aria-labelledby="sourcesTab" tabindex="0">
                <header class="mb-2" aria-label="Quellen Kopf">
                  <h2 class="h6 mb-1">Aktive Datenquellen</h2>
                </header>
                <div id="sourcesEmpty" class="text-muted">Noch keine Quelldetails vorhanden.</div>
                <section id="sourcesDetails" aria-label="Quellen Details"></section>
              </div>

            </div>
          </section>
        </section>

      </section>

      <aside class="col-12 col-lg-4" aria-label="Insights">
        <section aria-label="Insights Inhalte">
          <div class="row g-3">
            <div class="col-12">
              <section id="insights-legend" class="card h-100">
                <div class="card-body">
                  <h2 class="h6 card-title mb-2">Legende</h2>
                  <div id="legend" class="legend"></div>
                </div>
              </section>
            </div>
            <div class="col-12">
              <section id="insights-trends" class="card h-100"><div class="card-body"><h2 class="h6 card-title mb-2">Trends</h2><div class="insights__body">Platzhalter…</div></div></section>
            </div>
            <div class="col-12">
              <section id="insights-notes" class="card h-100"><div class="card-body"><h2 class="h6 card-title mb-2">Notizen</h2><div class="insights__body">Platzhalter…</div></div></section>
            </div>








          </div>
        </section>
      </aside>

    </div>

    <div class="row g-3"><footer id="pageFooter" class="col-12" aria-label="Fußbereich"></footer></div>

  </main>

  <script src="/assets/js/bootstrap.bundle.min.js"></script>
  <script src="/assets/js/d3.v7.min.js"></script>
  <script type="module" src="/main.js"></script>
</body>

</html>